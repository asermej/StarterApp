---
description: 
globs: 
alwaysApply: true
---
# ğŸš¨ CURSOR RULES INDEX - READ THIS FIRST ğŸš¨

**CRITICAL**: This workspace uses **MANDATORY** templates and workflows. Before starting ANY development work, you MUST follow the established patterns.

## ğŸ›‘ STOP - AI Assistant Checklist

Before proceeding with any request, validate:

- [ ] **Rule Discovery**: Have I found all relevant `.cursor/rules/` files?
- [ ] **Template Discovery**: Have I found all relevant `docs/templates/` files?
- [ ] **Workflow Selection**: Do I know which workflow to follow?
- [ ] **Interactive Process**: Am I following the required prompting process?

## ğŸ“ Rule Hierarchy (Check in Priority Order)

### 1. ğŸ—ï¸ Root Level Rules (Apply to Everything)
- **Location**: `.cursor/rules/`
- **[Architecture Principles](mdc:.cursor/rules/cursor_rules.mdc)** - Clean Architecture boundaries, overall structure
- **[This Index](mdc:.cursor/rules/00-rules-index.mdc)** - Rule discovery guide
- **Class Type Rules**: `.cursor/rules/classtypes/` - Auto-loaded best practices for specific file types

### 2. ğŸ”§ API Layer Rules (Backend Development)
- **Location**: `apps/api/.cursor/`
- **[Core Principles](mdc:apps/api/.cursor/rules/principles.mdc)** - Validation, exceptions, facades, domain patterns
- **[Endpoint Workflow](mdc:apps/api/.cursor/rules/endpoint-workflow.mdc)** - 8-phase interactive feature creation process
- **[Security & Performance](mdc:apps/api/.cursor/rules/security-performance.mdc)** - Security standards and performance requirements
- **Templates**: `docs/templates/create/` - Code generation templates for all backend components

### 3. ğŸ—„ï¸ Database Layer Rules (Schema & Migrations)
- **Location**: `apps/api/Platform.Database/.cursor/`
- **[Database Workflow](mdc:apps/api/Platform.Database/.cursor/rules/database-workflow.mdc)** - Table creation and migration process
- **[Liquibase Best Practices](mdc:apps/api/Platform.Database/.cursor/rules/liquibase-best-practices.mdc)** - Migration standards and naming
- **Templates**: `docs/templates/` - Schema and migration templates

### 4. ğŸ§ª Testing Layer Rules (Acceptance Tests)
- **Location**: `apps/api/Platform.AcceptanceTests/.cursor/`
- **[Testing Standards](mdc:apps/api/Platform.AcceptanceTests/.cursor/rules/testing-standards.mdc)** - Custom test doubles, DomainFacade-only testing
- **CRITICAL**: Only test through DomainFacade interface

### 5. ğŸŒ Web Layer Rules (Frontend Development)
- **Location**: `apps/web/Platform.Web/.cursor/` (when applicable)
- Frontend-specific patterns and components

## ğŸ¯ Quick Task Reference

| User Request | Primary Workflow | Required Templates | Key Rules |
|--------------|------------------|-------------------|-----------|
| **"New feature"**, **"Create API"**, **"Build [entity]"** | [Endpoint Workflow](mdc:apps/api/.cursor/rules/endpoint-workflow.mdc) | `docs/templates/create/` | [API Principles](mdc:apps/api/.cursor/rules/principles.mdc) |
| **"Database"**, **"Table"**, **"Migration"** | [Database Workflow](mdc:apps/api/Platform.Database/.cursor/rules/database-workflow.mdc) | `docs/templates/` | [Liquibase Practices](mdc:apps/api/Platform.Database/.cursor/rules/liquibase-best-practices.mdc) |
| **"Test"**, **"Testing"** | [Testing Standards](mdc:apps/api/Platform.AcceptanceTests/.cursor/rules/testing-standards.mdc) | `docs/templates/create/DomainFacadeTests.Base.hbs` | **ONLY test DomainFacade** |
| **"Frontend"**, **"UI"**, **"Component"** | Root architecture | TBD | Clean Architecture boundaries |

## ğŸš¨ CRITICAL TRIGGER PHRASES

When user mentions ANY of these, follow the specified workflow:

### API Development Triggers â†’ Use [Endpoint Workflow](mdc:apps/api/.cursor/rules/endpoint-workflow.mdc)
- "new feature", "create feature", "build feature"
- "new endpoint", "create API", "add endpoint"
- "Customer management", "User profile", "Order system" (any entity)
- "CRUD operations", "REST API"

### Database Triggers â†’ Use [Database Workflow](mdc:apps/api/Platform.Database/.cursor/rules/database-workflow.mdc)
- "database", "table", "schema"
- "migration", "liquibase"
- "create table", "alter table"

### Testing Triggers â†’ Use [Testing Standards](mdc:apps/api/Platform.AcceptanceTests/.cursor/rules/testing-standards.mdc)
- "test", "testing", "acceptance test"
- **CRITICAL**: Only test through DomainFacade interface
- Never test managers, data managers, or validators directly

## âš ï¸ RED FLAGS - Stop and Reassess If:

- âŒ You're creating code without using templates
- âŒ You're not following the defined workflow phases
- âŒ You're making up patterns instead of using established ones
- âŒ You haven't prompted the user for required information
- âŒ You're inferring from existing code instead of rules
- âŒ You're creating tests for individual classes instead of testing through DomainFacade only

## ğŸ”„ Standard Workflow Process

1. **Identify Task Type** â†’ Match to workflow above
2. **Read Complete Workflow** â†’ Don't skip steps
3. **Follow Interactive Process** â†’ Prompt user at each phase
4. **Use Templates** â†’ Never generate code from scratch
5. **Verify Against Templates** â†’ Ensure perfect match

## ğŸ“‹ Self-Validation Commands

Before starting work, ask yourself:

1. **"What .cursor folders exist in this workspace?"**
2. **"What type of work am I being asked to do?"**
3. **"What workflow file should I follow?"**
4. **"What templates should I use?"**
5. **"Am I following the interactive process?"**

## ğŸ“ Example Self-Validation Dialog

```
User: "I want to create a Customer management feature"

AI: "I see you want to create a Customer feature. Let me validate my approach:
1. âœ… Found .cursor folders at: root, apps/api, apps/api/Platform.Database
2. âœ… This is API feature work, so I need: apps/api/.cursor/rules/endpoint-workflow.mdc
3. âœ… I should use templates from: docs/templates/create/
4. âœ… I need to follow the 8-phase interactive process
5. âœ… I should start with Phase 1: Intelligent Feature Scoping

Ready to begin the interactive workflow as defined in the endpoint-workflow.mdc?"
```

## ğŸ”— Related Documentation

- **Clean Architecture**: See root `.cursor/rules/cursor_rules.mdc`
- **Testing Strategy**: Custom test doubles, no external mocking frameworks
- **Exception Handling**: Let exceptions bubble up to middleware
- **Database Standards**: Timestamp-based naming, audit fields, soft delete

---

**Remember**: The `.cursor` folders contain the **actual blueprint** for how features should be built. Always start here, not with existing code examples.
